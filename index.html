<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>UMap — Mapa interactivo</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --accent-color: #f07b48;
  --accent-hover: #e06c3a;
  --bg1: #ff6ec4;
  --bg2: #7873f5;
  --bg3: #4adede;
  --bg4: #fcb045;
  --text-color: #1a1a1a;
  --secondary-color: #666;
  --sidebar-width: 330px;
}

/* ===== RESET ===== */
* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}
body {
  margin: 0;
  height: 100vh;
  display: flex;
  font-family: "Poppins", sans-serif;
  background: linear-gradient(270deg, var(--bg1), var(--bg2), var(--bg3), var(--bg4));
  background-size: 800% 800%;
  color: var(--text-color);
  overflow: hidden;
  animation: bgMove 20s ease infinite;
}
@keyframes bgMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ===== SIDEBAR ===== */
#sidebar {
  width: var(--sidebar-width);
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  padding: 30px 22px;
  display: flex;
  flex-direction: column;
  box-shadow: 8px 0 25px rgba(0,0,0,0.1);
  border-right: 1px solid rgba(255,255,255,0.3);
  z-index: 10;
}

#logo-container {
  text-align: center;
  margin-bottom: 30px;
}

#logo {
  width: 100%;
  max-width: 150px;
  height: auto;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,0.1));
}

#sidebar input {
  padding: 12px 18px;
  border: none;
  border-radius: 25px;
  background: #f2f3f7;
  font-size: 14px;
  outline: none;
  margin-bottom: 25px;
  transition: all 0.25s ease;
}
#sidebar input:focus {
  background: #fff;
  box-shadow: 0 0 0 2px var(--accent-color);
}

/* ===== LISTA ===== */
.list {
  overflow-y: auto;
  flex: 1;
  padding-right: 8px;
}
.list::-webkit-scrollbar {
  width: 8px;
}
.list::-webkit-scrollbar-thumb {
  background-color: var(--accent-color);
  border-radius: 4px;
}

/* ===== ITEM ===== */
.list-item {
  padding: 15px;
  border-radius: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 15px;
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(0,0,0,0.05);
  box-shadow: 0 3px 10px rgba(0,0,0,0.04);
  transition: all 0.3s ease;
}
.list-item:hover {
  background: var(--accent-color);
  color: #fff;
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(240,123,72,0.25);
}
.badge {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: #2c3e50;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}
.list-item:hover .badge {
  background: #fff;
  color: var(--accent-color);
}
.list-item-title {
  font-weight: 600;
  font-size: 15px;
}
.desc-text {
  font-size: 12px;
  color: var(--secondary-color);
}

/* ===== MAPA ===== */
#map-container {
  position: relative;
  flex: 1;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(6px);
}

#map-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: brightness(0.98) contrast(1.05);
}

/* ===== MARCADORES ===== */
.marker {
  position: absolute;
  width: 34px;
  height: 34px;
  background: var(--accent-color);
  border: 3px solid #fff;
  border-radius: 50%;
  color: #fff;
  font-weight: 700;
  text-align: center;
  line-height: 28px;
  cursor: pointer;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  transform: translate(-50%, -50%);
  transition: transform 0.3s ease, background 0.3s ease;
  z-index: 10;
}
.marker:hover {
  transform: translate(-50%, -50%) scale(1.3);
  background: var(--accent-hover);
}

/* ===== POPUP ===== */
#popup {
  position: absolute;
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  padding: 18px 20px;
  display: none;
  z-index: 1000;
  min-width: 250px;
  max-width: 300px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  border: 1px solid rgba(0,0,0,0.05);
  animation: fadeIn 0.25s ease;
}
#popup .title {
  font-weight: 700;
  font-size: 18px;
  margin-bottom: 6px;
  color: var(--accent-color);
}
#popup .desc {
  font-size: 13px;
  color: var(--secondary-color);
}
#popup .popup-image {
  width: 100%;
  height: auto;
  margin-top: 12px;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,0.05);
}

/* ====== GIF SUPERPUESTO ====== */
/* === AQUÍ PUEDES AJUSTAR LA POSICIÓN DEL GIF === */
#gif-overlay {
  position: absolute;
  left: 70px;   /* ← mueve a la derecha/izquierda */
  top: 550px;    /* ← mueve arriba/abajo */
  width: 150px;  /* tamaño del GIF */
  height: auto;
  z-index: 50;
  pointer-events: none; /* para no bloquear clics del mapa */
}
#gif-overlay img {
  width: 100%;
  height: auto;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>
  <div id="sidebar">
    <div id="logo-container">
      <img src="logo1.png" id="logo" alt="Logo UMap">
    </div>
    <input id="searchInput" placeholder="Buscar edificio...">
    <div class="list" id="list"></div>
  </div>

  <div id="map-container">
    <img src="mapa1.png" id="map-image" alt="Mapa base">

    <!-- ===== AQUÍ ESTÁ EL GIF QUE PEDISTE ===== -->
    <div id="gif-overlay">
      <img src="mi_animacion.gif" alt="GIF animado">
    </div>

    <div id="popup"></div>
  </div>

<script>
const MAP_WIDTH = 1784;
const MAP_HEIGHT = 931;

const BUILDINGS = [
  { id: 'U1', x: 1005, y: 172, title: 'Edificio U1', desc: 'Bloque U1 - Zona Química', image: 'Quimi2.jpeg' },
  { id: 'U', x: 1073, y: 205, title: 'Edificio U', desc: 'Bloque U - Zona Química', image: 'Quimi1.jpeg' },
  { id: 'V', x: 1123, y: 222, title: 'Edificio V', desc: 'Bloque V - Zona Química', image: 'Quimi3.jpeg' },
  { id: 'W', x: 1170, y: 200, title: 'Edificio W', desc: 'Bloque W - Centro de Educacion Continua', image: 'Quimi4.jpeg' },
  { id: 'X', x: 1228, y: 181, title: 'Edificio X', desc: 'Bloque X - Facultad de Ciencias Económicas Administrativas', image: 'fcea2.jpeg' },
  { id: 'Y', x: 1261, y: 209, title: 'Edificio Y', desc: 'Bloque Y - Facultad de Ciencias Económicas Administrativas', image: 'fcea2.jpeg' },
  { id: 'Z', x: 1303, y: 218, title: 'Edificio Z', desc: 'Bloque Z - Facultad de Derecho', image: 'der.png' },
  { id: 'D', x: 1220, y: 283, title: 'Edificio D', desc: 'Salón de Usos Múltiples (SUM)', image: 'sum.jpg' },
  { id: 'S', x: 1136, y: 355, title: 'Edificio S', desc: 'Bloque S - Facultad de Ciencias Económicas Administrativas', image: 'fcea.png' },
  { id: 'T', x: 1055, y: 322, title: 'Edificio T', desc: 'Bloque T -Zona Química', image: 'Quimi1.jpeg' },
  { id: 'LL', x: 733, y: 415, title: 'Edificio LL', desc: 'Bloque cerca del Estadio', image: 'x.jpg' },
  { id: 'O', x: 861, y: 405, title: 'Edificio O', desc: 'Bloque O - Facultad de Ciencias Educativas', image: 'edu.jpg' },
  { id: 'P', x: 959, y: 408, title: 'Edificio P', desc: 'Bloque P - Sala Audiovisual', image: 'img/edificio_p.jpg' },
  { id: 'R', x: 1068, y: 450, title: 'Edificio R', desc: 'Bloque R - Facultad de Ciencias Económicas Administrativas', image: 'fcea.png' },
  { id: 'Ñ', x: 801, y: 488, title: 'Edificio Ñ', desc: 'Bloque Ñ - Sala de Usos Múltiples, Fotocopiado', image: 'pap.jpg' },
  { id: 'K', x: 899, y: 496, title: 'Edificio K - Facultad de Ciencias Educativas', desc: 'Bloque K', image: 'edu.jpg' },
  { id: 'Q', x: 1000, y: 469, title: 'Edificio Q - Facultad de Ciencias Educativas', desc: 'Bloque Q', image: 'edu.jpg' },
  { id: 'M', x: 774, y: 532, title: 'Edificio M', desc: 'Bloque M - Soporte Técnico', image: 'x.jpg' },
  { id: 'L', x: 845, y: 545, title: 'Edificio L', desc: 'Bloque L - Áreas de Servicios', image: 'x.jpg' },
  { id: 'I', x: 952, y: 595, title: 'Edificio I - Facultad de Ciencias Educativas', desc: 'Bloque I', image: 'edu.jpg' },
  { id: 'H', x: 997, y: 625, title: 'Edificio H - Facultad de Ciencias Educativas', image: 'edu.jpg' },
  { id: 'G', x: 1067, y: 656, title: 'Edificio G', desc: 'Bloque G - Servicios Culturales', image: 'x.jpg' },
  { id: 'JI', x: 890, y: 656, title: 'Edificio JI', desc: 'Bloque JI - Áreas de Servicios', image: 'x.jpg' },
  { id: 'J', x: 830, y: 630, title: 'Edificio J', desc: 'Bloque J - Coord. General de Obras y Baby Delfín', image: 'bby.jpeg' },
  { id: 'N', x: 752, y: 623, title: 'Edificio N', desc: 'Bloque N - Redes y Patrimonio Universitario', image: 'esta.jpeg' },
  { id: 'CAFETERIA', x: 1149, y: 499, title: 'Cafetería', desc: 'Comedores', image: 'Cafe.jpg' },
  { id: 'CH', x: 1220, y: 879, title: 'Edificio CH - Edificio de Vinculación', desc: 'Vinculación / Extensión Universitaria', image: 'Vincu.jpeg' },
  { id: 'BIBLIOTECA', x: 1409, y: 540, title: 'Biblioteca', desc: 'Edificio Central de la Biblioteca', image: 'biblio.jpg' },
  { id: 'C1', x: 1375, y: 680, title: 'C1', desc: 'Facultad Ciencias de la información', image: 'fci.jpeg' },
  { id: 'CENTRO DE IDIOMAS', x: 1394, y: 418, title: 'Centro de Idiomas', desc: 'Edificio del Centro de Idiomas', image: 'CEDA.jpg' },
  { id: 'Z1', x: 1474, y: 468, title: 'Z1', desc: 'Area de servicios', image: 'x.jpg' },
  { id: 'A', x: 284, y: 600, title: 'Edificio A', desc: 'Rectoría / Administración', image: 'recto.png' },
  { id: 'GYM', x: 520, y: 237, title: 'Gimnasio', desc: 'GYM', image: 'gym.jpg' },
  { id: 'ZE', x: 155, y: 430, title: 'Edificio ZE', desc: 'Bloque ZE -Sutunacar', image: 'sutu.jpg' },
  { id: 'ZB', x: 175, y: 378, title: 'Edificio ZB', desc: 'Bloque ZB - Secretaría Académica', image: 'x.jpg' },
  { id: 'RU', x: 398, y: 35, title: 'Edificio RU', desc: 'Bloque RU - Residencia Universitaria', image: 'X.jpg' }
];

const mapContainer = document.getElementById("map-container");
const mapImage = document.getElementById("map-image");
const popup = document.getElementById("popup");
const listDiv = document.getElementById("list");
const searchInput = document.getElementById("searchInput");

function showPopup(b, e) {
  const marker = e.target;
  const markerRect = marker.getBoundingClientRect();
  const containerRect = mapContainer.getBoundingClientRect();

  const popupX = markerRect.left - containerRect.left + markerRect.width + 10;
  const popupY = markerRect.top - containerRect.top - 10;

  const imageHtml = b.image
    ? `<img src="${b.image}" alt="Imagen de ${b.title}" class="popup-image">`
    : '';

  popup.style.left = popupX + "px";
  popup.style.top = popupY + "px";

  popup.innerHTML = `
    <div class="title">${b.title}</div>
    <div class="desc">${b.desc || ""}</div>
    ${imageHtml}
  `;

  popup.style.display = "block";
}

mapContainer.addEventListener("click", (e) => {
  if (!e.target.classList.contains("marker")) popup.style.display = "none";
});

function createMarkers() {
  document.querySelectorAll(".marker").forEach(m => m.remove());
  const imgRect = mapImage.getBoundingClientRect();
  const scale = Math.min(imgRect.width / MAP_WIDTH, imgRect.height / MAP_HEIGHT);
  const offsetX = (imgRect.width - MAP_WIDTH * scale) / 2;
  const offsetY = (imgRect.height - MAP_HEIGHT * scale) / 2;
  const extraOffsetX = 90, extraOffsetY = -40;

  BUILDINGS.forEach(b => {
    const marker = document.createElement("div");
    marker.className = "marker";
    marker.textContent = b.id[0];
    marker.setAttribute("data-id", b.id);

    if (b.x && b.y) {
      marker.style.left = (b.x * scale + offsetX + extraOffsetX) + "px";
      marker.style.top = (b.y * scale + offsetY + extraOffsetY) + "px";
    }

    marker.addEventListener("click", e => showPopup(b, e));
    mapContainer.appendChild(marker);
  });
}

function populateList(filter = "") {
  listDiv.innerHTML = "";
  const q = filter.toLowerCase();
  const filtered = BUILDINGS.filter(b =>
    b.id.toLowerCase().includes(q) ||
    b.title.toLowerCase().includes(q) ||
    (b.desc && b.desc.toLowerCase().includes(q))
  );

  if (filtered.length === 0) {
    listDiv.innerHTML = `<div style="text-align:center; color:#999; font-size:13px;">No se encontraron resultados</div>`;
    return;
  }

  filtered.forEach(b => {
    const item = document.createElement("div");
    item.className = "list-item";
    item.innerHTML = `
      <div class="badge">${b.id}</div>
      <div>
        <div class="list-item-title">${b.title}</div>
        <div class="desc-text">${b.desc || ""}</div>
      </div>`;

    item.addEventListener("click", () => {
      const marker = document.querySelector(`.marker[data-id="${b.id}"]`);
      if (marker) marker.click();
    });

    listDiv.appendChild(item);
  });
}

window.addEventListener("load", () => {
  createMarkers();
  populateList();
});
window.addEventListener("resize", createMarkers);
searchInput.addEventListener("input", e => {
  populateList(e.target.value.trim());
});
</script>

</body>
</html>
